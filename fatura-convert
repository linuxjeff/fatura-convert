#!/usr/bin/env bash
#
# fatura-convert - Converte PDF da fatura em PNG.
#
# Site      : https://github.com/linuxjeff
# Autor     : Jefferson Santana <computadores.rp@gmail.com>
#
# -----------------------------------------------------------------------------
#   Descrição: Utilizando o pacote poppler-utils para converter o PDF da fatura
#              em um arquivo PNG.
#
#   Exemplos:
#
# -----------------------------------------------------------------------------
#
#
# Histórico:
#
#  v0.0.1 26-08-2023, Jefferson Santana
#   - Versão inicial.
#  v0.0.2 27-08-2023, Jefferson Santana
#   - Cópiando o comando principal do .zshrc.
#   - Feito algumas alterações no comando, pois no .zshrc é usado alias.
#   - Colocado as variáveis do nome do arquivos.
#   - Foi trocado o nome do arquivo de fature-convert para fatura-convert.
#  v0.0.3 29-08-2023, Jefferson Santana
#   - Colocando o if para verificar se o pacote popler-utils esta instalado.
#	- Usando \ no comando para quebrar linhas.
#	- Comando pdftoppm movido para dentro do if.
#	- Colocado aviso para instalar pacote poppler-utils.
#	- Direcionado a saída do apt para o /dev/null.
#
# Licença: MIT.
#

# Variáveis
NOMEDOARQUIVO="fatura"
NOMEDOCAMINHO="$HOME/Downloads/"
POPPLER=`apt search poppler-utils 2> /dev/null | grep "poppler-utils/stable" | \
			grep "\[installed\]$" | cut -d "/" -f 1`
IPOPPLER="poppler-utils"

# Debug
echo "$POPPLER"
echo "$IPOPPLER"


if [ "$POPPLER" = "$IPOPPLER" ]
	then
		echo "igual"
		pdftoppm -png \
		"$NOMEDOCAMINHO""$NOMEDOARQUIVO".pdf "$NOMEDOCAMINHO""$NOMEDOARQUIVO"
	else
		echo -e "Favor instalar pacote \033[34;41mpoppler-utils\033[m."
		exit 1
fi

